{"ast":null,"code":"import { __assign } from \"tslib\";\nimport * as React from 'react';\nimport { KeyCodes, classNamesFunction, getNativeProps, inputProperties } from '../../Utilities';\nimport { useControllableValue, useId, useMergedRefs, useWarnings } from '@fluentui/react-hooks';\nimport { IconButton } from '../../Button';\nimport { Icon } from '../../Icon';\nvar COMPONENT_NAME = 'SearchBox';\nvar iconButtonStyles = {\n  root: {\n    height: 'auto'\n  },\n  icon: {\n    fontSize: '12px'\n  }\n};\nvar iconButtonProps = {\n  iconName: 'Clear'\n};\nvar defaultClearButtonProps = {\n  ariaLabel: 'Clear text'\n};\nvar getClassNames = classNamesFunction();\n\nvar useComponentRef = function (componentRef, inputElementRef, hasFocus) {\n  React.useImperativeHandle(componentRef, function () {\n    return {\n      focus: function () {\n        var _a;\n\n        return (_a = inputElementRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n      },\n      hasFocus: function () {\n        return hasFocus;\n      }\n    };\n  }, [inputElementRef, hasFocus]);\n};\n\nexport var SearchBoxBase = React.forwardRef(function (props, forwardedRef) {\n  var ariaLabel = props.ariaLabel,\n      className = props.className,\n      _a = props.defaultValue,\n      defaultValue = _a === void 0 ? '' : _a,\n      disabled = props.disabled,\n      underlined = props.underlined,\n      styles = props.styles,\n      // eslint-disable-next-line deprecation/deprecation\n  labelText = props.labelText,\n      // eslint-disable-next-line deprecation/deprecation\n  _b = props.placeholder,\n      // eslint-disable-next-line deprecation/deprecation\n  placeholder = _b === void 0 ? labelText : _b,\n      theme = props.theme,\n      _c = props.clearButtonProps,\n      clearButtonProps = _c === void 0 ? defaultClearButtonProps : _c,\n      _d = props.disableAnimation,\n      disableAnimation = _d === void 0 ? false : _d,\n      _e = props.showIcon,\n      showIcon = _e === void 0 ? false : _e,\n      customOnClear = props.onClear,\n      customOnBlur = props.onBlur,\n      customOnEscape = props.onEscape,\n      customOnSearch = props.onSearch,\n      customOnKeyDown = props.onKeyDown,\n      iconProps = props.iconProps,\n      role = props.role,\n      onChange = props.onChange,\n      // eslint-disable-next-line deprecation/deprecation\n  onChanged = props.onChanged;\n\n  var _f = React.useState(false),\n      hasFocus = _f[0],\n      setHasFocus = _f[1];\n\n  var _g = useControllableValue(props.value, defaultValue, React.useCallback(function (ev) {\n    onChange === null || onChange === void 0 ? void 0 : onChange(ev, ev === null || ev === void 0 ? void 0 : ev.target.value);\n    onChanged === null || onChanged === void 0 ? void 0 : onChanged(ev === null || ev === void 0 ? void 0 : ev.target.value);\n  }, [onChange, onChanged])),\n      uncastValue = _g[0],\n      setValue = _g[1];\n\n  var value = String(uncastValue);\n  var rootElementRef = React.useRef(null);\n  var inputElementRef = React.useRef(null);\n  var mergedRootRef = useMergedRefs(rootElementRef, forwardedRef);\n  var id = useId(COMPONENT_NAME, props.id);\n  var customOnClearClick = clearButtonProps.onClick;\n  var classNames = getClassNames(styles, {\n    theme: theme,\n    className: className,\n    underlined: underlined,\n    hasFocus: hasFocus,\n    disabled: disabled,\n    hasInput: value.length > 0,\n    disableAnimation: disableAnimation,\n    showIcon: showIcon\n  });\n  var nativeProps = getNativeProps(props, inputProperties, ['className', 'placeholder', 'onFocus', 'onBlur', 'value', 'role']);\n  var onClear = React.useCallback(function (ev) {\n    var _a;\n\n    customOnClear === null || customOnClear === void 0 ? void 0 : customOnClear(ev);\n\n    if (!ev.defaultPrevented) {\n      setValue('');\n      (_a = inputElementRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n      ev.stopPropagation();\n      ev.preventDefault();\n    }\n  }, [customOnClear, setValue]);\n  var onClearClick = React.useCallback(function (ev) {\n    customOnClearClick === null || customOnClearClick === void 0 ? void 0 : customOnClearClick(ev);\n\n    if (!ev.defaultPrevented) {\n      onClear(ev);\n    }\n  }, [customOnClearClick, onClear]);\n\n  var onFocusCapture = function (ev) {\n    var _a;\n\n    setHasFocus(true);\n    (_a = props.onFocus) === null || _a === void 0 ? void 0 : _a.call(props, ev);\n  };\n\n  var onClickFocus = function () {\n    if (inputElementRef.current) {\n      inputElementRef.current.focus();\n      inputElementRef.current.selectionStart = inputElementRef.current.selectionEnd = 0;\n    }\n  };\n\n  var onBlur = React.useCallback(function (ev) {\n    setHasFocus(false);\n    customOnBlur === null || customOnBlur === void 0 ? void 0 : customOnBlur(ev);\n  }, [customOnBlur]);\n\n  var onInputChange = function (ev) {\n    setValue(ev.target.value, ev);\n  };\n\n  var onKeyDown = function (ev) {\n    // eslint-disable-next-line deprecation/deprecation\n    switch (ev.which) {\n      case KeyCodes.escape:\n        customOnEscape === null || customOnEscape === void 0 ? void 0 : customOnEscape(ev); // Only call onClear if the search box has a value to clear. Otherwise, allow the Esc key\n        // to propagate from the empty search box to a parent element such as a dialog, etc.\n\n        if (value && !ev.defaultPrevented) {\n          onClear(ev);\n        }\n\n        break;\n\n      case KeyCodes.enter:\n        if (customOnSearch) {\n          customOnSearch(value);\n          ev.preventDefault();\n          ev.stopPropagation();\n        }\n\n        break;\n\n      default:\n        // REVIEW: Why aren't we calling customOnKeyDown for Escape or Enter?\n        customOnKeyDown === null || customOnKeyDown === void 0 ? void 0 : customOnKeyDown(ev); // REVIEW: Why are we calling stopPropagation if customOnKeyDown called preventDefault?\n        // customOnKeyDown should call stopPropagation if it needs it.\n\n        if (ev.defaultPrevented) {\n          ev.stopPropagation();\n        }\n\n        break;\n    }\n  };\n\n  useDebugWarning(props);\n  useComponentRef(props.componentRef, inputElementRef, hasFocus);\n  return React.createElement(\"div\", {\n    role: role,\n    ref: mergedRootRef,\n    className: classNames.root,\n    onFocusCapture: onFocusCapture\n  }, React.createElement(\"div\", {\n    className: classNames.iconContainer,\n    onClick: onClickFocus,\n    \"aria-hidden\": true\n  }, React.createElement(Icon, __assign({\n    iconName: \"Search\"\n  }, iconProps, {\n    className: classNames.icon\n  }))), React.createElement(\"input\", __assign({}, nativeProps, {\n    id: id,\n    className: classNames.field,\n    placeholder: placeholder,\n    onChange: onInputChange,\n    onInput: onInputChange,\n    onBlur: onBlur,\n    onKeyDown: onKeyDown,\n    value: value,\n    disabled: disabled,\n    role: \"searchbox\",\n    \"aria-label\": ariaLabel,\n    ref: inputElementRef\n  })), value.length > 0 && React.createElement(\"div\", {\n    className: classNames.clearButton\n  }, React.createElement(IconButton, __assign({\n    onBlur: onBlur,\n    styles: iconButtonStyles,\n    iconProps: iconButtonProps\n  }, clearButtonProps, {\n    onClick: onClearClick\n  }))));\n});\nSearchBoxBase.displayName = COMPONENT_NAME;\n\nfunction useDebugWarning(props) {\n  if (process.env.NODE_ENV !== 'production') {\n    // eslint-disable-next-line react-hooks/rules-of-hooks -- build-time conditional\n    useWarnings({\n      name: COMPONENT_NAME,\n      props: props,\n      deprecations: {\n        labelText: 'placeholder'\n      }\n    });\n  }\n}","map":{"version":3,"sources":["components/SearchBox/SearchBox.base.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { ISearchBoxProps, ISearchBoxStyleProps, ISearchBoxStyles, ISearchBox } from './SearchBox.types';\nimport { KeyCodes, classNamesFunction, getNativeProps, inputProperties } from '../../Utilities';\nimport { useControllableValue, useId, useMergedRefs, useWarnings } from '@fluentui/react-hooks';\nimport { IconButton, IButtonProps, IButtonStyles } from '../../Button';\nimport { Icon, IIconProps } from '../../Icon';\n\nconst COMPONENT_NAME = 'SearchBox';\nconst iconButtonStyles: Partial<IButtonStyles> = { root: { height: 'auto' }, icon: { fontSize: '12px' } };\nconst iconButtonProps: IIconProps = { iconName: 'Clear' };\nconst defaultClearButtonProps: IButtonProps = { ariaLabel: 'Clear text' };\n\nconst getClassNames = classNamesFunction<ISearchBoxStyleProps, ISearchBoxStyles>();\n\nconst useComponentRef = (\n  componentRef: React.Ref<ISearchBox> | undefined,\n  inputElementRef: React.RefObject<HTMLInputElement>,\n  hasFocus: boolean,\n) => {\n  React.useImperativeHandle(\n    componentRef,\n    () => ({\n      focus: () => inputElementRef.current?.focus(),\n      hasFocus: () => hasFocus,\n    }),\n    [inputElementRef, hasFocus],\n  );\n};\n\nexport const SearchBoxBase: React.FunctionComponent<ISearchBoxProps> = React.forwardRef<\n  HTMLDivElement,\n  ISearchBoxProps\n>((props, forwardedRef) => {\n  const {\n    ariaLabel,\n    className,\n    defaultValue = '',\n    disabled,\n    underlined,\n    styles,\n    // eslint-disable-next-line deprecation/deprecation\n    labelText,\n    // eslint-disable-next-line deprecation/deprecation\n    placeholder = labelText,\n    theme,\n    clearButtonProps = defaultClearButtonProps,\n    disableAnimation = false,\n    showIcon = false,\n    onClear: customOnClear,\n    onBlur: customOnBlur,\n    onEscape: customOnEscape,\n    onSearch: customOnSearch,\n    onKeyDown: customOnKeyDown,\n    iconProps,\n    role,\n    onChange,\n    // eslint-disable-next-line deprecation/deprecation\n    onChanged,\n  } = props;\n\n  const [hasFocus, setHasFocus] = React.useState(false);\n  const [uncastValue, setValue] = useControllableValue(\n    props.value,\n    defaultValue,\n    React.useCallback(\n      (ev: React.ChangeEvent<HTMLInputElement> | undefined) => {\n        onChange?.(ev, ev?.target.value);\n        onChanged?.(ev?.target.value);\n      },\n      [onChange, onChanged],\n    ),\n  );\n  const value = String(uncastValue);\n  const rootElementRef = React.useRef<HTMLDivElement>(null);\n  const inputElementRef = React.useRef<HTMLInputElement>(null);\n  const mergedRootRef = useMergedRefs(rootElementRef, forwardedRef);\n  const id = useId(COMPONENT_NAME, props.id);\n\n  const { onClick: customOnClearClick } = clearButtonProps;\n\n  const classNames = getClassNames(styles!, {\n    theme: theme!,\n    className,\n    underlined,\n    hasFocus,\n    disabled,\n    hasInput: value.length > 0,\n    disableAnimation,\n    showIcon,\n  });\n\n  const nativeProps = getNativeProps<React.InputHTMLAttributes<HTMLInputElement>>(props, inputProperties, [\n    'className',\n    'placeholder',\n    'onFocus',\n    'onBlur',\n    'value',\n    'role',\n  ]);\n\n  const onClear = React.useCallback(\n    (ev: React.MouseEvent<HTMLAnchorElement | HTMLButtonElement> | React.KeyboardEvent<HTMLElement>) => {\n      customOnClear?.(ev);\n      if (!ev.defaultPrevented) {\n        setValue('');\n        inputElementRef.current?.focus();\n        ev.stopPropagation();\n        ev.preventDefault();\n      }\n    },\n    [customOnClear, setValue],\n  );\n\n  const onClearClick = React.useCallback(\n    (ev: React.MouseEvent<HTMLAnchorElement | HTMLButtonElement>) => {\n      customOnClearClick?.(ev);\n      if (!ev.defaultPrevented) {\n        onClear(ev);\n      }\n    },\n    [customOnClearClick, onClear],\n  );\n\n  const onFocusCapture = (ev: React.FocusEvent<HTMLElement>) => {\n    setHasFocus(true);\n    props.onFocus?.(ev as React.FocusEvent<HTMLInputElement>);\n  };\n\n  const onClickFocus = () => {\n    if (inputElementRef.current) {\n      inputElementRef.current.focus();\n      inputElementRef.current.selectionStart = inputElementRef.current.selectionEnd = 0;\n    }\n  };\n\n  const onBlur = React.useCallback(\n    (ev: React.FocusEvent<HTMLInputElement>): void => {\n      setHasFocus(false);\n      customOnBlur?.(ev);\n    },\n    [customOnBlur],\n  );\n\n  const onInputChange = (ev: React.ChangeEvent<HTMLInputElement>) => {\n    setValue(ev.target.value, ev);\n  };\n\n  const onKeyDown = (ev: React.KeyboardEvent<HTMLInputElement>) => {\n    // eslint-disable-next-line deprecation/deprecation\n    switch (ev.which) {\n      case KeyCodes.escape:\n        customOnEscape?.(ev);\n        // Only call onClear if the search box has a value to clear. Otherwise, allow the Esc key\n        // to propagate from the empty search box to a parent element such as a dialog, etc.\n        if (value && !ev.defaultPrevented) {\n          onClear(ev);\n        }\n        break;\n\n      case KeyCodes.enter:\n        if (customOnSearch) {\n          customOnSearch(value);\n          ev.preventDefault();\n          ev.stopPropagation();\n        }\n        break;\n\n      default:\n        // REVIEW: Why aren't we calling customOnKeyDown for Escape or Enter?\n        customOnKeyDown?.(ev);\n        // REVIEW: Why are we calling stopPropagation if customOnKeyDown called preventDefault?\n        // customOnKeyDown should call stopPropagation if it needs it.\n        if (ev.defaultPrevented) {\n          ev.stopPropagation();\n        }\n        break;\n    }\n  };\n\n  useDebugWarning(props);\n  useComponentRef(props.componentRef, inputElementRef, hasFocus);\n\n  return (\n    <div role={role} ref={mergedRootRef} className={classNames.root} onFocusCapture={onFocusCapture}>\n      <div className={classNames.iconContainer} onClick={onClickFocus} aria-hidden>\n        <Icon iconName=\"Search\" {...iconProps} className={classNames.icon} />\n      </div>\n      <input\n        {...nativeProps}\n        id={id}\n        className={classNames.field}\n        placeholder={placeholder}\n        onChange={onInputChange}\n        onInput={onInputChange}\n        onBlur={onBlur}\n        onKeyDown={onKeyDown}\n        value={value}\n        disabled={disabled}\n        role=\"searchbox\"\n        aria-label={ariaLabel}\n        ref={inputElementRef}\n      />\n      {value!.length > 0 && (\n        <div className={classNames.clearButton}>\n          <IconButton\n            onBlur={onBlur}\n            styles={iconButtonStyles}\n            iconProps={iconButtonProps}\n            {...clearButtonProps}\n            onClick={onClearClick}\n          />\n        </div>\n      )}\n    </div>\n  );\n});\nSearchBoxBase.displayName = COMPONENT_NAME;\n\nfunction useDebugWarning(props: ISearchBoxProps) {\n  if (process.env.NODE_ENV !== 'production') {\n    // eslint-disable-next-line react-hooks/rules-of-hooks -- build-time conditional\n    useWarnings({\n      name: COMPONENT_NAME,\n      props,\n      deprecations: { labelText: 'placeholder' },\n    });\n  }\n}\n"],"sourceRoot":"../src/"},"metadata":{},"sourceType":"module"}